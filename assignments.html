<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Assignments</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 1100px;
      margin: auto;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: var(--accent);
    }

    .assignment-card {
      background: var(--card);
      border-left: 5px solid var(--accent);
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .assignment-card select, .assignment-card input {
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .top-form, .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }

    .progress-bar {
      height: 8px;
      width: 100%;
      background: #ddd;
      border-radius: 5px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--accent);
      width: 0%;
      transition: width 0.4s;
    }

    .calendar, .actions {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
    }

    .btn {
      background: var(--accent);
      border: none;
      padding: 8px 16px;
      color: white;
      border-radius: 8px;
      cursor: pointer;
    }

    .dark-mode-toggle {
      position: fixed;
      left: 20px;
      top: 20px;
    }

    :root {
      --bg: #fefaf6;
      --card: #fff4f0;
      --text: #333;
      --accent: #9b5de5;
    }

    .dark-mode {
      --bg: #1e1e2f;
      --card: #2d2d44;
      --text: #eee;
      --accent: #00c896;
    }
  </style>
</head>
<body>
  <button class="dark-mode-toggle btn" onclick="toggleDarkMode()">üåô</button>
  <div class="container">
    <h1>üìö Assignments</h1>

    <div class="top-form">
      <input type="text" id="title" placeholder="Assignment Title" />
      <input type="date" id="dueDate" />
      <select id="subject">
        <option value="">Subject</option>
        <option value="CSE101">CSE101</option>
        <option value="Math">Math</option>
        <option value="Physics">Physics</option>
      </select>
      <select id="priority">
        <option value="Low">Low</option>
        <option value="Medium">Medium</option>
        <option value="High">High</option>
      </select>
      <select id="status">
        <option value="Not Started">Not Started</option>
        <option value="In Progress">In Progress</option>
        <option value="Completed">Completed</option>
      </select>
      <button class="btn" onclick="addAssignment()">‚ûï Add</button>
    </div>

    <div class="filters">
      <select id="filterSubject" onchange="renderAssignments()">
        <option value="">Filter by Subject</option>
        <option value="CSE101">CSE101</option>
        <option value="Math">Math</option>
        <option value="Physics">Physics</option>
      </select>
      <select id="filterStatus" onchange="renderAssignments()">
        <option value="">Filter by Status</option>
        <option value="Not Started">Not Started</option>
        <option value="In Progress">In Progress</option>
        <option value="Completed">Completed</option>
      </select>
    </div>

    <div class="calendar">
      <span>üìÜ Calendar View Coming Soon</span>
      <div class="actions">
        <button class="btn" onclick="exportCSV()">Export CSV</button>
        <button class="btn" onclick="exportPDF()">Export PDF</button>
      </div>
    </div>

    <div id="assignmentList"></div>
  </div>

  <script>
    const assignmentList = document.getElementById('assignmentList');
    let assignments = JSON.parse(localStorage.getItem('assignments') || '[]');

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    function addAssignment() {
      const title = document.getElementById('title').value;
      const dueDate = document.getElementById('dueDate').value;
      const subject = document.getElementById('subject').value;
      const priority = document.getElementById('priority').value;
      const status = document.getElementById('status').value;
      if (!title || !dueDate) return alert("Fill all fields");

      assignments.push({ title, dueDate, subject, priority, status });
      localStorage.setItem('assignments', JSON.stringify(assignments));
      renderAssignments();
    }

    function deleteAssignment(index) {
      assignments.splice(index, 1);
      localStorage.setItem('assignments', JSON.stringify(assignments));
      renderAssignments();
    }

    function renderAssignments() {
      assignmentList.innerHTML = '';
      const filterSubject = document.getElementById('filterSubject').value;
      const filterStatus = document.getElementById('filterStatus').value;

      assignments
        .filter(a => (!filterSubject || a.subject === filterSubject))
        .filter(a => (!filterStatus || a.status === filterStatus))
        .forEach((a, i) => {
          const progress = a.status === "Completed" ? 100 : a.status === "In Progress" ? 50 : 0;
          const card = document.createElement('div');
          card.className = 'assignment-card';
          card.innerHTML = `
            <strong>${a.title}</strong>
            <div>Due: ${a.dueDate}</div>
            <div>Subject: ${a.subject} | Priority: ${a.priority} | Status: ${a.status}</div>
            <div class="progress-bar"><div class="progress-fill" style="width:${progress}%"></div></div>
            <button class="btn" onclick="deleteAssignment(${i})">üóëÔ∏è Delete</button>
          `;
          assignmentList.appendChild(card);
        });
    }

    function exportCSV() {
      let csv = "Title,DueDate,Subject,Priority,Status\n";
      assignments.forEach(a => {
        csv += `${a.title},${a.dueDate},${a.subject},${a.priority},${a.status}\n`;
      });
      downloadFile(csv, 'assignments.csv', 'text/csv');
    }

    function exportPDF() {
      alert("üìù PDF export coming soon (need PDF lib)");
    }

    function downloadFile(data, filename, type) {
      const blob = new Blob([data], { type });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      a.click();
    }

    renderAssignments();
  </script>
</body>
</html>
